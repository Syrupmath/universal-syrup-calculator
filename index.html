<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Universal Syrup Calculator</title>
    <meta name="description" content="Universal Syrup Calculator by Jeffrey Morgenthaler helps you make perfect 2:1 and 1:1 sugar syrups. Calculate the right amount of sugar or water based on your liquid's weight and Brix.">
    <meta name="keywords" content="syrup calculator, sugar syrup, 2:1 syrup, 1:1 syrup, Jeffrey Morgenthaler, cocktail syrup">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Universal Syrup Calculator by Jeffrey Morgenthaler">
    <meta property="og:description" content="Calculate the right amount of sugar or water to make perfect 2:1 and 1:1 sugar syrups.">
    <meta property="og:image" content="URL_TO_IMAGE">
    <meta property="og:url" content="YOUR_WEBSITE_URL">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Universal Syrup Calculator by Jeffrey Morgenthaler">
    <meta name="twitter:description" content="Calculate the right amount of sugar or water to make perfect 2:1 and 1:1 sugar syrups.">
    <meta name="twitter:image" content="URL_TO_IMAGE">
</head>
<body>
    <div class="container">
        <h1>Universal Syrup Calculator</h1>
        <p class="author">by <a href="https://jeffreymorgenthaler.com/universal-syrup-calculator/" target="_blank" aria-label="Link to my website, opens in a new window">Jeffrey Morgenthaler</a></p>
        <p>This tool helps you calculate the amount of sugar or water needed to make perfect <b>2:1</b> or <b>1:1</b> sugar syrups from <em>any</em> liquid - fruit and vegetable juices, milks, and liquid sugars such as honey or agave syrup.</p>
        <p><em>To get started, weigh your liquid with a <a href="https://amzn.to/3SgPzZM" target="_blank" aria-label="Link to buy, opens in a new window">digital scale</a> and measure its Brix (sugar content percentage) with an <a href="https://amzn.to/46cc4EW" target="_blank" aria-label="Link to buy, opens in a new window">optical refractometer</a>. The calculator will tell you how much additional sugar or water you need to add to achieve your desired syrup consistency.</em></p>
        
        <div class="input-group">
            <label for="weight">Weight of Liquid (grams):</label>
            <input type="number" id="weight" required>
            <span class="error" id="weightError"></span>
        </div>
        <div class="input-group">
            <label for="brix">Initial Brix (%):</label>
            <input type="number" id="brix" required>
            <span class="error" id="brixError"></span>
        </div>
        <button id="calculateButton" onclick="calculate()">Calculate</button>
        <div class="result" id="result"></div>

        <hr class="divider" id="divider">

        <footer>
            <p>If you'd like to support the site, consider <a href="https://jeffreymorgenthaler.com/book/" target="_blank" aria-label="Link to buy, opens in a new window">buying a signed copy</a> of one of my books on cocktails and bartending, there's tons more helpful advice for making drinks in there!</p>
        </footer>
    </div>

    <script>
        function calculate() {
            const weightInput = document.getElementById('weight');
            const brixInput = document.getElementById('brix');
            const weightError = document.getElementById('weightError');
            const brixError = document.getElementById('brixError');
            const divider = document.getElementById('divider');
            const weight = parseFloat(weightInput.value);
            const brix = parseFloat(brixInput.value);
            const brixDecimal = brix / 100;
            const targetBrix2to1 = 2/3;
            const targetBrix1to1 = 0.5;
            const brixTolerance = 0.005; // If brix is within 0.5 brix of target, no addition is needed
            let resultText = '';
            let additionType = ''; // To store whether we need to add sugar or water
            let valid = true;

            // Clear previous error messages
            weightError.textContent = '';
            brixError.textContent = '';

            if (isNaN(weight) || weight <= 0) {
                weightError.textContent = 'Please enter a valid weight.';
                valid = false;
            }
            if (isNaN(brix) || brix < 0 || brix > 100) {
                brixError.textContent = 'Please enter a valid Brix value (0-100).';
                valid = false;
            }

            if (!valid) {
                return;
            }

            if (isNaN(weight) || isNaN(brixDecimal)) {
                resultText = 'Please enter valid numbers for weight and Brix.';
            } else {
                // For 2:1 Syrup
                let additionalSugar2to1 = 0;
                let additionalWater2to1 = 0;
                if (brixDecimal + brixTolerance < targetBrix2to1) {
                    additionalSugar2to1 = (targetBrix2to1 * weight - brixDecimal * weight) / (1 - targetBrix2to1);
                    resultText += `<p>To make a <b>2:1</b> syrup, add <span class="highlight">${additionalSugar2to1.toFixed(2)} grams</span> of sugar.</p>`;
                    additionType = 'sugar';
                } else if (brixDecimal - brixTolerance > targetBrix2to1) {
                    additionalWater2to1 = (brixDecimal * weight - targetBrix2to1 * weight) / targetBrix2to1;
                    resultText += `<p>To make a <b>2:1</b> syrup, add <span class="highlight">${additionalWater2to1.toFixed(2)} grams</span> of water.</p>`;
                    additionType = 'water';
                } else {
                    resultText += '<p>Your liquid already has the perfect Brix for a <b>2:1</b> syrup.</p>';
                }
                // For 1:1 Syrup
                let additionalSugar1to1 = 0;
                let additionalWater1to1 = 0;
                if (brixDecimal + brixTolerance < targetBrix1to1) {
                    additionalSugar1to1 = (targetBrix1to1 * weight - brixDecimal * weight) / (1 - targetBrix1to1);
                    resultText += `<p>To make a <b>1:1</b> syrup, add <span class="highlight">${additionalSugar1to1.toFixed(2)} grams</span> of sugar.</p>`;
                    additionType = 'sugar';
                } else if (brixDecimal - brixTolerance > targetBrix1to1) {
                    additionalWater1to1 = (brixDecimal * weight - targetBrix1to1 * weight) / targetBrix1to1;
                    resultText += `<p>To make a <b>1:1</b> syrup, add <span class="highlight">${additionalWater1to1.toFixed(2)} grams</span> of water.</p>`;
                    additionType = 'water';
                } else {
                    resultText += '<p>Your liquid already has the perfect Brix for a <b>1:1</b> syrup.</p>';
                }

                // Add contextualized instructions based on the addition type
                if (additionType === 'sugar') {
                    resultText += '<p><em>Heat your liquid and the additional sugar over gentle heat and stir until everything is combined.</em></p>';
                } else if (additionType === 'water') {
                    resultText += '<p><em>Heat your liquid and the additional water over gentle heat and stir until everything is combined.</em></p>';
                }

                resultText += '<p><em>Allow mixture to cool, store in <a href="https://amzn.to/3Sd2092" target="_blank" aria-label="Link to buy, opens in a new window">squeeze bottles</a>, label and refrigerate.</em></p>';
            }

            document.getElementById('result').innerHTML = resultText;
            divider.style.display = 'block'; // Show the divider after displaying results
        }

        // Add event listener to trigger the calculate function when Enter key is pressed
        document.getElementById('weight').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                document.getElementById('calculateButton').click();
            }
        });

        document.getElementById('brix').addEventListener('keydown', function(event) {
            if (event.key === 'Enter') {
                document.getElementById('calculateButton').click();
            }
        });
    </script>
</body>
</html>
